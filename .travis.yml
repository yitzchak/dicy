dist: trusty

branches:
  only:
    - master
    - /^greenkeeper/.*$/

language: r

node_js:
  - node

os:
  - linux
  - osx

# env:
#   global:
#     - R_LIBS_USER=${HOME}/R/library

cache: packages

# brew_packages:
#  - ghostscript

r_packages:
  - patchSynctex

# addons:
#   apt:
#     sources:
#       - r-packages-trusty
#     packages:
#       - asymptote
#       - biber
#       - feynmf
#       - latex-xcolor
#       - lhs2tex
#       - python-pygments
#       - r-recommended
#       - texlive-bibtex-extra
#       - texlive-latex-base
#       - texlive-latex-extra
#       - texlive-latex-recommended
#       - texlive-metapost
#       - texlive-xetex

# before_install:
#   - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then export PATH=/Library/TeX/texbin:~/Library/Haskell/bin:$PATH; fi
#   - ./scripts/install-mac
#   - ./scripts/install-r-libs

install:
  - npm install

before_script:
  - tlmgr install adjustbox amsrefs asymptote biber biblatex bibtopic collectbox currfile datatool everypage filemod framed fvextra gincltex glossaries ifplatform lazylist lipsum logreq makeglos mfirstuc minted multibib nomencl polytable standalone stmaryrd subfiles substr supertabular svn-prov texware ucs xfor xstring
  - npm run update-dependencies
  - npm run bootstrap

script:
  - npm test
