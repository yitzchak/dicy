#!/usr/bin/env bash

if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then
  echo Updating homebrew...
  brew update

  echo Installing GhostScript...
  brew install ghostscript

  echo Installing R...
  brew tap homebrew/science
  brew install r

  echo Installing MacTeX...
  wget http://mirror.ctan.org/systems/mac/mactex/BasicTeX.pkg
  sudo installer -pkg BasicTeX.pkg -target /
  export PATH=/Library/TeX/texbin:$PATH
  
  echo Installing TeX packages...
  sudo tlmgr update --self
  sudo tlmgr install \
    amsrefs \
    asymptote \
    biber \
    biblatex \
    bibtopic \
    currfile \
    datatool \
    everypage \
    filehook \
    filemod \
    framed \
    fvextra \
    glossaries \
    ifplatform \
    lipsum \
    logreq \
    makeglos \
    makeindex \
    mfirstuc \
    minted \
    natbib \
    multibib \
    nomencl \
    standalone \
    subfiles \
    substr \
    supertabular \
    xfor \
    xstring    
  sudo tlmgr info --only-installed
  ls /Library/TeX/texbin
fi
